<!DOCTYPE html>
<!--
/*
 * INTER-Mediator Ver.@@@@2@@@@ Released @@@@1@@@@
 * 
 *   by Masayuki Nii  msyk@msyk.net Copyright (c) 2012 Masayuki Nii, All rights reserved.
 * 
 *   This project started at the end of 2009.
 *   INTER-Mediator is supplied under MIT License.
 */  -->
<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="stylesheet" type="text/css" href="../sample.css"/>
    <title>INTER-Mediator - Sample - Authorized Chat / FileMaker Server</title>
    <script src="include_FMS.php"></script>
    <script type="text/javascript">
        window.onload = function () {
            INTERMediator.construct(true);

            document.getElementById("postbutton").onclick = function () {
                INTERMediator_DBAdapter.db_createRecordWithAuth({
                            name:"chat",
                            dataset:[{
                                field: "message",
                                value: document.getElementById("message").value}]},
                        function () {
                            INTERMediator.construct(0);
                            document.getElementById("message").value = "";
                            INTERMediator.flushMessage();
                        });
            }
        }
    </script>
</head>
<body>
<h1>Simple but Authorized Chat</h1>
<table>
    <thead>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td>
            <input type="text" id="message"/>
            <button id="postbutton">Post</button>
        </td>
    </tr>
    <tr>
        <th>Date and Time</th>
        <th>User</th>
        <th>Group</th>
        <th>Message</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td data-im="chat@postdt"></td>
        <td data-im="chat@user"></td>
        <td data-im="chat@groupname"></td>
        <td data-im="chat@message"></td>
    </tr>
    </tbody>
</table>
</body>
</html>